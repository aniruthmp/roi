<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ROI Calculation</title>
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="favicon.png">
    <!-- Material Design Lite -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
</head>
<body>
<div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
    <header class="mdl-layout__header">
        <div class="mdl-layout__header-row">
            <span class="mdl-layout-title" style="text-align: center; width: 100%;">ROI Calculation</span>
        </div>
    </header>
    <main class="mdl-layout__content">
        <!-- Guidance -->
        <!--
        <h5>Guidance: All provided costs are monthly</h5>
        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
            <textarea class="mdl-textfield__input" type="text" id="guidance" name="guidance" rows="3" readonly>All provided costs are monthly</textarea>
            <label class="mdl-textfield__label" for="guidance">Guidance</label>
        </div>
        -->
        <div class="page-content">
            <form id="costDetailsForm" class="mdl-grid" action="#" method="post">
                <!-- Infrastructure -->
                <div class="mdl-cell mdl-cell--4-col">
                    <h4>Infrastructure</h4>
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                        <textarea class="mdl-textfield__input" type="text" id="infrastructureDescription" name="infrastructureDescription" rows="3" readonly>Cloud computing services needed to host the system.</textarea>
                    </div>
                    <div class="mdl-textfield mdl-js-textfield">
                        <input class="mdl-textfield__input" type="number" id="noOfServices" name="noOfServices">
                        <label class="mdl-textfield__label" for="noOfServices">No. of services to host</label>
                    </div>
                    <div class="mdl-textfield mdl-js-textfield">
                        <input class="mdl-textfield__input" type="number" id="infraRate" name="infraRate">
                        <label class="mdl-textfield__label" for="infraRate">Unit Cloud Hosting cost per month</label>
                    </div>
                </div>
                <!-- Software and Tools -->
                <div class="mdl-cell mdl-cell--4-col">
                    <h4>Software and Tools</h4>
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                        <textarea class="mdl-textfield__input" type="text" id="softwareAndToolsDescription" name="softwareAndToolsDescription" rows="3" readonly>LLMs and other commercial libraries</textarea>
                    </div>
                    <div class="mdl-textfield mdl-js-textfield">
                        <input class="mdl-textfield__input" type="number" id="noOfUsers" name="noOfUsers">
                        <label class="mdl-textfield__label" for="noOfUsers">No. of Users</label>
                    </div>
                    <div class="mdl-textfield mdl-js-textfield">
                        <input class="mdl-textfield__input" type="number" id="llmCost" name="llmCost">
                        <label class="mdl-textfield__label" for="llmCost">Per User Cost</label>
                    </div>
                </div>
                <!-- Training and Fine Tuning -->
                <div class="mdl-cell mdl-cell--4-col">
                    <h4>Training and Fine Tuning</h4>
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                        <textarea class="mdl-textfield__input" type="text" id="trainingAndFineTuningDescription" name="trainingAndFineTuningDescription" rows="3" readonly>Data acquisition and model customization costs.</textarea>
                    </div>
                    <div class="mdl-textfield mdl-js-textfield">
                        <input class="mdl-textfield__input" type="number" id="noOfTrainingHours" name="noOfTrainingHours">
                        <label class="mdl-textfield__label" for="noOfTrainingHours">No. of hours spent</label>
                    </div>
                    <div class="mdl-textfield mdl-js-textfield">
                        <input class="mdl-textfield__input" type="number" id="trainingRate" name="trainingRate">
                        <label class="mdl-textfield__label" for="trainingRate">Hourly Rate</label>
                    </div>
                </div>
                <!-- Ongoing Maintenance -->
                <div class="mdl-cell mdl-cell--4-col">
                    <h4>Ongoing Maintenance</h4>
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                        <textarea class="mdl-textfield__input" type="text" id="ongoingMaintenanceDescription" name="ongoingMaintenanceDescription" rows="3" readonly>Monitoring, updates, and retraining costs.</textarea>
                    </div>
                    <div class="mdl-textfield mdl-js-textfield">
                        <input class="mdl-textfield__input" type="number" id="noOfMaintenanceHours" name="noOfMaintenanceHours">
                        <label class="mdl-textfield__label" for="noOfMaintenanceHours">No. of hours spent</label>
                    </div>
                    <div class="mdl-textfield mdl-js-textfield">
                        <input class="mdl-textfield__input" type="number" id="maintenanceRate" name="maintenanceRate">
                        <label class="mdl-textfield__label" for="maintenanceRate">Hourly Rate</label>
                    </div>
                </div>
                <!-- Value Fields -->
                <div class="mdl-cell mdl-cell--4-col">
                    <h4 style="color: forestgreen">Revenue Gain</h4>
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                        <textarea class="mdl-textfield__input" type="text" id="miscellaneousCostsDescription" name="miscellaneousCostsDescription" rows="3" readonly>Revenue Gain, Cost Reduced, Risk Avoided</textarea>
                    </div>
                    <div class="mdl-textfield mdl-js-textfield">
                        <input class="mdl-textfield__input" type="number" id="additionalRevenue" name="additionalRevenue">
                        <label class="mdl-textfield__label" for="additionalRevenue">Additional Revenue</label>
                    </div>
                    <div class="mdl-textfield mdl-js-textfield">
                        <input class="mdl-textfield__input" type="number" id="costReduction" name="costReduction">
                        <label class="mdl-textfield__label" for="costReduction">Cost Reduction</label>
                    </div>
                    <div class="mdl-textfield mdl-js-textfield">
                        <input class="mdl-textfield__input" type="number" id="productivityHoursGained" name="productivityHoursGained">
                        <label class="mdl-textfield__label" for="productivityHoursGained">Productivity Hours Gained</label>
                    </div>
                    <div class="mdl-textfield mdl-js-textfield">
                        <input class="mdl-textfield__input" type="number" id="riskAvoided" name="riskAvoided">
                        <label class="mdl-textfield__label" for="riskAvoided">Risk avoided</label>
                    </div>
                </div>
                <div class="mdl-cell mdl-cell--12-col">
                    <button type="button" class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored" onclick="submitForm()">Submit</button>
                </div>
            </form>
            <!-- Output Section -->
            <div id="outputSection" class="mdl-cell mdl-cell--12-col" style="margin-top: 20px; display: none;">
                <h3>Output</h3>
                <div class="mdl-cell mdl-cell--12-col">
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                        <label class="mdl-textfield__label mdl-color-text--black" for="monthlyCost">Monthly Costs</label>
                    </div>
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                        <input class="mdl-textfield__input" type="text" id="monthlyCost" readonly>
                    </div>
                </div>
                <div class="mdl-cell mdl-cell--12-col">
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                        <label class="mdl-textfield__label mdl-color-text--black" for="monthlyGain">Monthly Gain</label>
                    </div>
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                        <input class="mdl-textfield__input" type="text" id="monthlyGain" readonly>
                    </div>
                </div>
                <div class="mdl-cell mdl-cell--12-col">
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                        <label class="mdl-textfield__label mdl-color-text--black" for="roi">ROI</label>
                    </div>
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                        <input class="mdl-textfield__input" type="text" id="roi" readonly>
                    </div>
                </div>
            </div>
        </div>
    </main>
</div>

<script>
    function submitForm() {
        var formData = {
            infrastructure: {
                noOfServices: parseInt(document.getElementById('noOfServices').value),
                rate: parseFloat(document.getElementById('infraRate').value)
            },
            softwareAndTools: {
                noOfUsers: parseInt(document.getElementById('noOfUsers').value),
                llmCost: parseFloat(document.getElementById('llmCost').value)
            },
            trainingAndFineTuning: {
                noOfHours: parseInt(document.getElementById('noOfTrainingHours').value),
                rate: parseFloat(document.getElementById('trainingRate').value)
            },
            ongoingMaintenance: {
                noOfHours: parseInt(document.getElementById('noOfMaintenanceHours').value),
                rate: parseFloat(document.getElementById('maintenanceRate').value)
            },
            value: {
                additionalRevenue: parseFloat(document.getElementById('additionalRevenue').value),
                costReduction: parseFloat(document.getElementById('costReduction').value),
                productivityHoursGained: parseInt(document.getElementById('productivityHoursGained').value),
                riskAvoided: parseFloat(document.getElementById('riskAvoided').value)
            }
        };

        console.log(JSON.stringify(formData));
        // Send the formData to Spring Boot REST API using fetch or XMLHttpRequest
        fetch('http://localhost:8080/api/roi', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(formData)
        }).then(response => response.json())
            .then(data => {
                // Check if data contains netBenefits and roi fields
                if (data.hasOwnProperty('monthlyCost') &&
                    data.hasOwnProperty('monthlyGain') && data.hasOwnProperty('roi')) {
                    // Display output
                    document.getElementById('monthlyCost').value = data.monthlyCost;
                    document.getElementById('monthlyGain').value = data.monthlyGain;
                    document.getElementById('roi').value = data.roi + "%";
                    // Show output section
                    document.getElementById('outputSection').style.display = 'block';
                    // Autoscroll to output section
                    document.getElementById('outputSection').scrollIntoView({ behavior: 'smooth' });
                } else {
                    alert('Invalid response received from the server.');
                }
            }).catch(error => {
            console.error('Error:', error);
            alert('Failed to retrieve output.');
        });
    }
</script>
</body>
</html>
</title>
</head>
<body>

</body>
</html>