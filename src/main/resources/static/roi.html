<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ROI Calculation</title>
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="favicon.png">
    <!-- Material Design Lite -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
</head>
<body>
<div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
    <header class="mdl-layout__header">
        <div class="mdl-layout__header-row">
            <span class="mdl-layout-title" style="text-align: center; width: 100%;">ROI Calculation</span>
        </div>
    </header>
    <main class="mdl-layout__content">
        <div class="page-content">
            <form id="costDetailsForm" class="mdl-grid" action="#" method="post">
                <!-- Infrastructure -->
                <div class="mdl-cell mdl-cell--4-col">
                    <h4>Infrastructure</h4>
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                        <textarea class="mdl-textfield__input" type="text" id="infrastructureDescription"
                                  name="infrastructureDescription" rows="3" readonly>Cloud computing services needed to host the system.</textarea>
                    </div>
                    <div class="mdl-textfield mdl-js-textfield">
                        <input class="mdl-textfield__input" type="number" id="noOfServices"
                               name="noOfServices" pattern="[0-9]*" oninput="updateRoi()">
                        <label class="mdl-textfield__label" for="noOfServices">No. of services to host</label>
                    </div>
                    <div class="mdl-textfield mdl-js-textfield">
                        <input class="mdl-textfield__input" type="number" id="infraRate" name="infraRate">
                        <label class="mdl-textfield__label" for="infraRate">Unit Cloud Hosting cost per month</label>
                    </div>
                </div>
                <!-- Software and Tools -->
                <div class="mdl-cell mdl-cell--4-col">
                    <h4>Software and Tools</h4>
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                        <textarea class="mdl-textfield__input" type="text" id="softwareAndToolsDescription"
                                  name="softwareAndToolsDescription" rows="3" readonly>LLMs and other commercial libraries</textarea>
                    </div>
                    <div class="mdl-textfield mdl-js-textfield">
                        <input class="mdl-textfield__input" type="number" id="noOfUsers"
                               name="noOfUsers" pattern="[0-9]*" oninput="updateRoi()">
                        <label class="mdl-textfield__label" for="noOfUsers">No. of Users</label>
                    </div>
                    <div class="mdl-textfield mdl-js-textfield">
                        <input class="mdl-textfield__input" type="number" id="llmCost"
                               name="llmCost" pattern="[0-9]*" oninput="updateRoi()">
                        <label class="mdl-textfield__label" for="llmCost">Per User Cost</label>
                    </div>
                </div>
                <!-- Training and Fine Tuning -->
                <div class="mdl-cell mdl-cell--4-col">
                    <h4>Training and Fine Tuning</h4>
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                        <textarea class="mdl-textfield__input" type="text" id="trainingAndFineTuningDescription"
                                  name="trainingAndFineTuningDescription" rows="3" readonly>Data acquisition and model customization costs.</textarea>
                    </div>
                    <div class="mdl-textfield mdl-js-textfield">
                        <input class="mdl-textfield__input" type="number" id="noOfTrainingHours"
                               pattern="[0-9]*" oninput="updateTuning()" name="noOfTrainingHours">
                        <label class="mdl-textfield__label" for="noOfTrainingHours">No. of hours spent</label>
                    </div>
                    <div>
                        <span id="trainingRate">0</span>
                    </div>
                </div>
                <!-- Ongoing Maintenance -->
                <div class="mdl-cell mdl-cell--4-col">
                    <h4>Ongoing Maintenance</h4>
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                        <textarea class="mdl-textfield__input" type="text" id="ongoingMaintenanceDescription"
                                  name="ongoingMaintenanceDescription" rows="3" readonly>Monitoring, updates, and retraining costs.</textarea>
                    </div>
                    <div class="mdl-textfield mdl-js-textfield">
                        <input class="mdl-textfield__input" type="number" id="noOfMaintenanceHours"
                               name="noOfMaintenanceHours" pattern="[0-9]*" oninput="updateMaintenance()">
                        <label class="mdl-textfield__label" for="noOfMaintenanceHours">No. of hours spent</label>
                    </div>
                    <div>
                        <span id="maintenanceRate">0</span>
                    </div>
                </div>
                <!-- Value Fields -->
                <div class="mdl-cell mdl-cell--4-col">
                    <h4 style="color: forestgreen">Revenue Gain</h4>
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                        <textarea class="mdl-textfield__input" type="text" id="miscellaneousCostsDescription"
                                  name="miscellaneousCostsDescription" rows="3" readonly>Revenue Gain, Cost Reduced, Risk Avoided</textarea>
                    </div>
                    <div class="mdl-textfield mdl-js-textfield">
                        <input class="mdl-textfield__input" type="number" id="additionalRevenue"
                               name="additionalRevenue" pattern="[0-9]*" oninput="updateRoi()">
                        <label class="mdl-textfield__label" for="additionalRevenue">Additional Revenue</label>
                    </div>
                    <div class="mdl-textfield mdl-js-textfield">
                        <input class="mdl-textfield__input" type="number" id="costReduction"
                               name="costReduction" pattern="[0-9]*" oninput="updateRoi()">
                        <label class="mdl-textfield__label" for="costReduction">Cost Reduction</label>
                    </div>
                    <div class="mdl-textfield mdl-js-textfield">
                        <input class="mdl-textfield__input" type="number" id="productivityHoursGained"
                               name="productivityHoursGained" pattern="[0-9]*" oninput="updateRoi()">
                        <label class="mdl-textfield__label" for="productivityHoursGained">Productivity Hours
                            Gained</label>
                    </div>
                    <div class="mdl-textfield mdl-js-textfield">
                        <input class="mdl-textfield__input" type="number" id="riskAvoided"
                               name="riskAvoided" pattern="[0-9]*" oninput="updateRoi()">
                        <label class="mdl-textfield__label" for="riskAvoided">Risk avoided</label>
                    </div>
                </div>
            </form>
            <!-- Output Section -->
            <div id="outputSection" class="mdl-cell mdl-cell--12-col" style="margin-top: 20px;">
                <h3>Output</h3>
                <div class="mdl-cell mdl-cell--12-col">
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                        <label class="mdl-textfield__label mdl-color-text--black" for="monthlyCost">Monthly
                            Costs</label>
                    </div>
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                        <input class="mdl-textfield__input" type="text" id="monthlyCost" readonly>
                    </div>
                </div>
                <div class="mdl-cell mdl-cell--12-col">
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                        <label class="mdl-textfield__label mdl-color-text--black" for="monthlyGain">Monthly Gain</label>
                    </div>
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                        <input class="mdl-textfield__input" type="text" id="monthlyGain" readonly>
                    </div>
                </div>
                <div class="mdl-cell mdl-cell--12-col">
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                        <label class="mdl-textfield__label mdl-color-text--black" for="roi">ROI</label>
                    </div>
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                        <input class="mdl-textfield__input" type="text" id="roi" readonly>
                    </div>
                </div>
            </div>
        </div>
    </main>
</div>

<script>
    function updateMaintenance() {
        let maintCost = document.getElementById('noOfMaintenanceHours');
        if (!!maintCost.value) {
            maintCost = parseInt(maintCost.value) * 60;
        } else {
            maintCost = 0;
        }
        document.getElementById("maintenanceRate").innerText = "$" + maintCost;
        document.getElementById("maintenanceRate").value = maintCost;
    }

    function updateTuning() {
        let trainingCost = document.getElementById('noOfTrainingHours');
        if (!!trainingCost.value) {
            trainingCost = parseInt(trainingCost.value) * 60;
        } else {
            trainingCost = 0;
        }
        document.getElementById("trainingRate").innerText = "$" + trainingCost;
        document.getElementById("trainingRate").value = trainingCost;
    }

    function updateRoi() {
        let noOfServices = document.getElementById('noOfServices');
        let infraRate = document.getElementById('infraRate');
        let infrastructureCost = 0;
        if (!!noOfServices.value && !!infraRate.value) {
            noOfServices = parseInt(noOfServices.value);
            infraRate = parseInt(infraRate.value);
            infrastructureCost = noOfServices * infraRate;
        }

        let noOfUsers = document.getElementById('noOfUsers');
        let llmCost = document.getElementById('llmCost');
        let softwareCost = 0;
        if (!!noOfUsers.value && !!llmCost.value) {
            noOfUsers = parseInt(noOfUsers.value);
            llmCost = parseInt(llmCost.value);
            softwareCost = noOfUsers * llmCost;
        }

        let trainingCost = document.getElementById('trainingRate');
        if (!!trainingCost.value) {
            trainingCost = parseInt(trainingCost.value);
        } else {
            trainingCost = 0;
        }
        let maintenanceCost = document.getElementById('maintenanceRate');
        if (!!maintenanceCost.value) {
            maintenanceCost = parseInt(maintenanceCost.value);
        } else {
            maintenanceCost = 0;
        }

        let additionalRevenue = document.getElementById('additionalRevenue');
        if (!!additionalRevenue.value) {
            additionalRevenue = parseInt(additionalRevenue.value);
        } else {
            additionalRevenue = 0;
        }
        let costReduction = document.getElementById('costReduction');
        if (!!costReduction.value) {
            costReduction = parseInt(costReduction.value);
        } else {
            costReduction = 0;
        }

        let productivityHoursGained = document.getElementById('productivityHoursGained');
        if (!!productivityHoursGained.value) {
            productivityHoursGained = parseInt(productivityHoursGained.value);
        } else {
            productivityHoursGained = 0;
        }
        let riskAvoided = document.getElementById('riskAvoided');
        if (!!riskAvoided.value) {
            riskAvoided = parseInt(riskAvoided.value);
        } else {
            riskAvoided = 0;
        }

        let totalMonthlyCost = infrastructureCost + softwareCost + trainingCost + maintenanceCost;

        let totalMonthlyValue = 0;
        totalMonthlyValue = additionalRevenue + costReduction + riskAvoided +
            (productivityHoursGained * 60); //TODO: Check with Jesse

        document.getElementById('monthlyCost').value = "$" + totalMonthlyCost;
        document.getElementById('monthlyGain').value = "$" + totalMonthlyValue;

        if(totalMonthlyCost > 0) {
            let roi = ((totalMonthlyValue - totalMonthlyCost) / totalMonthlyCost) * 100;
            roi = Math.round(roi * 100) / 100;
            document.getElementById('roi').value = roi + "%";
        }

    }

</script>
</body>
</html>
</title>
</head>
<body>

</body>
</html>